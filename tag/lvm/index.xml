<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Lvm on 魔都水滴</title>
    <link>https://blog.margrop.net/tag/lvm/</link>
    <description>Recent content in Lvm on 魔都水滴</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Wed, 14 May 2025 22:16:48 +0800</lastBuildDate>
    <atom:link href="https://blog.margrop.net/tag/lvm/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>PVE 磁盘巡检接入 Uptime Kuma——踩坑 404 的来龙去脉与最终脚本</title>
      <link>https://blog.margrop.net/post/pve-host-virtual-machine-disk-space-monitor-experience-step-two/</link>
      <pubDate>Wed, 14 May 2025 22:16:48 +0800</pubDate>
      <guid>https://blog.margrop.net/post/pve-host-virtual-machine-disk-space-monitor-experience-step-two/</guid>
      <description>&lt;blockquote&gt;&#xA;&lt;p&gt;&lt;strong&gt;写在前面&lt;/strong&gt;&#xA;前一篇文章教大家把 PVE 宿主机的 LVM‑Thin 用量推到 Uptime Kuma。&#xA;有同学照做后 &lt;code&gt;curl&lt;/code&gt; 推送却报 &lt;strong&gt;404&lt;/strong&gt;。本文完整复盘原因、修正脚本，并给出 &lt;strong&gt;可选升级方案&lt;/strong&gt;。零基础跟着做，保证一次成功。&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;1现象curl--404&#34;&gt;1 现象：&lt;code&gt;curl … 404&lt;/code&gt;&lt;/h2&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;curl -fsS --retry &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;     &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;${&lt;/span&gt;PUSH_URL&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;?status=up&amp;amp;msg=OK&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;     -H &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Content-Type: application/json&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;     --data-raw &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;$result&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# ↳ curl: (22) The requested URL returned error: 404&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
    </item>
    <item>
      <title>PVE 宿主机磁盘空间监控——从踩坑到接入 Uptime Kuma 的完整小白教程</title>
      <link>https://blog.margrop.net/post/pve-host-virtual-machine-lvm-disk-space-monitor-experience/</link>
      <pubDate>Wed, 14 May 2025 22:11:33 +0800</pubDate>
      <guid>https://blog.margrop.net/post/pve-host-virtual-machine-lvm-disk-space-monitor-experience/</guid>
      <description>&lt;blockquote&gt;&#xA;&lt;p&gt;&lt;strong&gt;目标读者&lt;/strong&gt;&#xA;这篇文章写给刚刚接触 Proxmox VE（简称 &lt;strong&gt;PVE&lt;/strong&gt;）且希望“按步骤照做就能跑”的同学。整篇内容力求：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;解释 &lt;em&gt;为什么&lt;/em&gt; 会遇到问题&lt;/li&gt;&#xA;&lt;li&gt;每一步都给出 &lt;strong&gt;完整命令&lt;/strong&gt;&lt;/li&gt;&#xA;&lt;li&gt;出错时给出 &lt;strong&gt;排查思路&lt;/strong&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/blockquote&gt;</description>
    </item>
    <item>
      <title>Ubuntu / CentOS 磁盘根目录在线扩容 &amp; 修改分区 inode 数量</title>
      <link>https://blog.margrop.net/post/ubuntu-lv-extend-and-resize-inode/</link>
      <pubDate>Sat, 25 Mar 2023 13:42:44 +0800</pubDate>
      <guid>https://blog.margrop.net/post/ubuntu-lv-extend-and-resize-inode/</guid>
      <description>&lt;p&gt;Ubuntu 作为服务器系统使用的时候，系统盘的空间可能并不是很充裕，apt apt 着，根目录就满了。诚然，增加磁盘 / 分区并挂载是一个方案，但并不能解决所有问题（例如 apt）。同时，一些跑在云平台上的服务器并没有很好的离线操作磁盘的手段，这时候在线扩容就显得极为必要了。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;数据无价！对磁盘进行任何操作前，请务必做好备份！&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;h1 id=&#34;0-简要操作步骤&#34;&gt;0. 简要操作步骤&lt;/h1&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#系统分区扩容&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;parted -l&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;fdisk -l&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cfdisk&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#扩容块（sda3）&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;lsblk&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;pvresize /dev/sda3&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;lsblk&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#扩容lv和vg（Ubuntu）&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;lvextend -l +100%FREE /dev/mapper/ubuntu--vg-ubuntu--lv&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;resize2fs /dev/mapper/ubuntu--vg-ubuntu--lv&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;df -h&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#扩容lv和vg（CentOS）&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;lvextend -l +100%FREE /dev/mapper/centos-root&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;resize2fs /dev/mapper/centos-root&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;df -h&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&#34;1-磁盘根目录在线扩容&#34;&gt;1. 磁盘根目录在线扩容&lt;/h1&gt;&#xA;&lt;p&gt;操作环境：Proxmox VE 虚拟化 / Ubuntu 22.04.5 LTS / GPT 分区表 / ext4 分区&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
