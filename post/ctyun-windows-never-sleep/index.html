<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>天翼云电脑相关配置，及永不休眠方法 | 魔都水滴</title>
<link rel="shortcut icon" href="https://blog.margrop.net/favicon.ico?v=1747232555299">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.3.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://blog.margrop.net/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="天翼云电脑相关配置，及永不休眠方法 | 魔都水滴 - Atom Feed" href="https://blog.margrop.net/atom.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">


<script async src="https://www.googletagmanager.com/gtag/js?id=G-3J2W592DHJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-3J2W592DHJ');
</script>


<script type="text/javascript" src="https://js.users.51.la/21044367.js"></script>
<script charset="UTF-8" id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js"></script>
<script>LA.init({id: "1vVTUWl7zoRjnKXi",ck: "1vVTUWl7zoRjnKXi"})</script>
<script src="https://sdk.51.la/perf/js-sdk-perf.min.js" crossorigin="anonymous"></script>
<script>
  new LingQue.Monitor().init({id:"202teQt8THXwqyve"});
</script>
    <meta name="description" content="Windows软件下载地址：https://download.margrop.net/#/EXE

天翼云电脑：https://desk.ctyun.cn/html/download/
计划软件：http://www.everauto.ne..." />
    <meta name="keywords" content="ctyun,天翼云,云电脑" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
    <script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://blog.margrop.net">
  <img class="avatar" src="https://blog.margrop.net/images/avatar.png?v=1747232555299" alt="">
  </a>
  <h1 class="site-title">
    魔都水滴
  </h1>
  <p class="site-description">
    A Programmer, A Javaer, A Father, A Geeker, A Huster, A Acmer, A Wower, A Player
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          首页
        </a>
      
    
      
        <a href="/archives" class="menu">
          归档
        </a>
      
    
      
        <a href="/tags" class="menu">
          标签
        </a>
      
    
      
        <a href="/post/about" class="menu">
          关于
        </a>
      
    
      
        <a href="https://download.margrop.net" class="menu" target="_blank">
          下载
        </a>
      
    
      
        <a href="/post/favorites" class="menu">
          Link
        </a>
      
    
      
        <a href="/post/github-project-stars" class="menu">
          Github
        </a>
      
    
      
        <a href="https://github-mirrors.margrop.net" class="menu" target="_blank">
          Github加速
        </a>
      
    
      
        <a href="https://docker-mirrors.margrop.net" class="menu" target="_blank">
          Docker加速
        </a>
      
    
  </div>
  <div class="social-container">
    
      
        <a href="https://github.com/margrop" target="_blank">
          <i class="ri-github-line"></i>
        </a>
      
    
      
    
      
    
      
    
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              天翼云电脑相关配置，及永不休眠方法
            </h2>
            <div class="post-info">
              <span>
                2024-06-04
              </span>
              <span>
                6 min read
              </span>
              
                <a href="https://blog.margrop.net/tag/ntpouUsn1/" class="post-tag">
                  # ctyun
                </a>
              
                <a href="https://blog.margrop.net/tag/RNNdRtMmt7/" class="post-tag">
                  # 天翼云
                </a>
              
                <a href="https://blog.margrop.net/tag/HbzSfm8Vn_/" class="post-tag">
                  # 云电脑
                </a>
              
            </div>
            
            <div class="post-content-wrapper">
              <div class="post-content">
                <p>Windows软件下载地址：https://download.margrop.net/#/EXE</p>
<blockquote>
<p>天翼云电脑：https://desk.ctyun.cn/html/download/<br>
计划软件：http://www.everauto.net/<br>
天翼云电脑exe默认路径：C:\Program Files (x86)\CtyunClouddeskUniversal\CtyunClouddeskUniversal.exe<br>
宝塔面板：https://www.bt.cn/new/product_windows.html<br>
宝塔面板旧版本：http://download.bt.cn/win/update/net/BtSoft-Win.zip<br>
frp：https://github.com/fatedier/frp<br>
NSSM：http://www.nssm.cc/download<br>
Notepad++：https://download.margrop.net/d/oneindex/EXE/npp.8.6.7.Installer.x64.exe<br>
RustDesk：https://download.margrop.net/d/oneindex/EXE/rustdesk-1.2.3-2-x86_64.exe</p>
</blockquote>
<!-- more -->
<p>下面的教程来自<a href="https://www.4awl.net/3298.html">https://www.4awl.net/3298.html</a></p>
<p>本期的主题是天翼云电脑永不休眠，加上一点点的内网穿透就能当服务器使用，拥有了一台云电脑还能当云服务器使用。</p>
<p>当然这个方案放在挂机宝或者其他云电脑产品上面也是可以使用的。</p>
<h2 id="天翼云电脑不休眠">天翼云电脑不休眠</h2>
<p>天翼云电脑如何不休眠，其实非常的简单，像一般的云电脑产品或者挂机宝等业务都是24小时开机，天翼云还是非常的有头脑，你超过一小时不用，我给你休眠既消耗你的服务器使用时间，还能保证我的资源回收完全利用。</p>
<p>这个时候我们当然必须要用魔法打败魔法啦，首先我们在我们的云电脑上面下载两个软件。</p>
<p>天翼云电脑：https://desk.ctyun.cn/html/download/ 和计划软件：http://www.everauto.net/</p>
<p>我们把两个软件都安装好，再打开天翼云电脑，把账号密码输入进去把自动登录和保存密码登录勾上。</p>
<p>现在目前天翼云电脑客户端采用了打开软件就自动打开云电脑的策略，这个时候我们再打开我们的计划软件去添加一个计划，打开云电脑，那么我们的云电脑就自动登录了我们的云电脑，一直挂着就实现了永不休眠的一个状态。</p>
<p>我们先添加一个新任务：</p>
<figure data-type="image" tabindex="1"><img src="https://www.4awl.net/wp-content/uploads/2024/04/2024040203380357.png" alt="天翼云电脑永不休眠 加上内网穿透当云服务器使用插图" loading="lazy"></figure>
<p>任务类型我们选择程序-执行程序：</p>
<figure data-type="image" tabindex="2"><img src="https://www.4awl.net/wp-content/uploads/2024/04/2024040203390078.png" alt="天翼云电脑永不休眠 加上内网穿透当云服务器使用插图1" loading="lazy"></figure>
<p>然后到程序路径填写：</p>
<p>C:\Program Files (x86)\CtyunClouddeskUniversal\CtyunClouddeskUniversal.exe</p>
<p>天翼云电脑默认的安装目录就是这个，如果大家自己更改了就根据实际情况修改。（注意这些操作都是在云电脑上完成的）</p>
<p>然后计划设定我们选择分钟循环，时间间隔设置50分钟就可以了，这个样子50分钟后我们的云电脑就会自动登录我们的云电脑，然后一直挂着就不会休眠了。</p>
<h2 id="改造成云服务器">改造成云服务器</h2>
<p>首先拿出我们的国民宝塔或者小皮面板都是可以的，这里我使用的是宝塔面板。</p>
<p>打开宝塔面板：https://www.bt.cn/new/product_windows.html 下载安装，会有一个打开面板的按钮，我们打开会发现无法访问，因为我们的IP不是公网IP，所以我们需要把IP修改成127.0.0.1就可以打开面板了。</p>
<p>打开面板先把环境软件都安装好，比如nginx mysql php等，这个样子我们的服务器就配置完成了，但是还需要访问公网绑定域名才算一个云服务器。</p>
<h3 id="frp内网穿透">frp内网穿透</h3>
<p>frp 是一个专注于内网穿透的高性能的反向代理应用，支持 TCP、UDP、HTTP、HTTPS 等多种协议。可以将内网服务以安全、便捷的方式通过具有公网 IP 节点的中转暴露到公网。</p>
<p>如果我们没有公网IP服务器，那么我们可以去百度上面搜索一些公益frp服务然后搭建起来使用。</p>
<p>GitHub地址：https://github.com/fatedier/frp，可以在 <a href="https://www.4awl.net/go?_=702ef0b1ddaHR0cHM6Ly9naXRodWIuY29tL2ZhdGVkaWVyL2ZycC9yZWxlYXNlcw%3D%3D">Release</a> 页面中下载到最新版本的客户端和服务端二进制文件，所有文件被打包在一个压缩包中。</p>
<p>首先我们需要下载Windows amd64 和 Linux amd64 的frp文件包，这个大家可以在GitHub上自己去下载。</p>
<p>把Linux的frp文件包上传到服务器上，并且解压出来，我们再执行 chmod +x frps 给他添加一个执行权限。然后使用下面的命令就能启动：</p>
<p><strong>nohup ./frps -c frps.</strong> toml****  <strong>&gt;</strong>  /var/log/frp.<strong>log</strong> <strong>2</strong>&gt; <strong>&amp;</strong> 1 <strong>&amp;</strong></p>
<p>这个样子我们的frps就在后台启动完成了，注意：frps在有公网IP服务器上运行，frpc是在内网服务器上运行。</p>
<h3 id="windows-frpc配置开机自启">Windows frpc配置+开机自启</h3>
<p>首先，创建新建文本文件，里面内容如下，保存后将后缀改为vbs：</p>
<p><strong>set ws=WScript.</strong> CreateObject <strong>(</strong> &quot;WScript.Shell&quot; <strong>)</strong></p>
<p><strong>ws.</strong> Run****  <strong>&quot;c:frpfrpc.exe -c c:frpfrpc.toml&quot;</strong> ,<strong>0</strong></p>
<p>大家根据自己的frpc目录去修改然后创建一个vbs文件就可以了，再打开我们的控制面板，找到任务计划程序，创建计划任务：</p>
<figure data-type="image" tabindex="3"><img src="https://www.4awl.net/wp-content/uploads/2024/04/2024040203591229.png" alt="天翼云电脑永不休眠 加上内网穿透当云服务器使用插图2" loading="lazy"></figure>
<p>1、在任务计划里面创建任务。<br>
2、名字随意填写，勾选不管用户是否登录都运行。<br>
3、触发器这栏，新建，选择启动时。<br>
4、操作这栏，新建，程序和脚本这里选择刚才的创建vbs文件。<br>
5、条件这栏，把只交流电源勾选去掉。<br>
6、设置这栏，把运行超过3天停止任务勾选去掉</p>
<p>添加计划任务会需要输入管理员密码，默认天翼云电脑没有设置管理员密码，我们需要在系统-账户-登录选项 创建一个密码。</p>
<p>这个样子我们的开机启动就配置完成了，我们的云电脑就算重启也能保证frpc稳定运行。</p>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%94%B5%E8%84%91%E4%B8%8D%E4%BC%91%E7%9C%A0">天翼云电脑不休眠</a></li>
<li><a href="#%E6%94%B9%E9%80%A0%E6%88%90%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8">改造成云服务器</a>
<ul>
<li><a href="#frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F">frp内网穿透</a></li>
<li><a href="#windows-frpc%E9%85%8D%E7%BD%AE%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF">Windows frpc配置+开机自启</a></li>
</ul>
</li>
</ul>
</li>
</ul>

              </div>
            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">下一篇</div>
            <a href="https://blog.margrop.net/post/n5105-in-promox-ve-frequently-dead/">
              <h3 class="post-title">
                N5105 Promox VE 8.2版本，虚拟机频繁死机问题处理
              </h3>
            </a>
          </div>
        

        
          
            <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

<div id="gitalk-container"></div>

<script>

  var gitalk = new Gitalk({
    clientID: '3181fd94e501cc5db0ad',
    clientSecret: 'af1dab79dae02c69296e6615bfcecf47fc8615ee',
    repo: 'margropcomment.margrop.io',
    owner: 'margrop',
    admin: ['margrop'],
    id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
    distractionFreeMode: false  // Facebook-like distraction free mode
  })

  gitalk.render('gitalk-container')

</script>

          

          
        

        <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
  <a class="rss" href="https://blog.margrop.net/atom.xml" target="_blank">
    <i class="ri-rss-line"></i> RSS
  </a>
</div>
<script type="text/javascript" src="https://js.users.51.la/21044367.js"></script>

      </div>
    </div>

    <script>
      hljs.initHighlightingOnLoad()

      let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

      // This should probably be throttled.
      // Especially because it triggers during smooth scrolling.
      // https://lodash.com/docs/4.17.10#throttle
      // You could do like...
      // window.addEventListener("scroll", () => {
      //    _.throttle(doThatStuff, 100);
      // });
      // Only not doing it here to keep this Pen dependency-free.

      window.addEventListener("scroll", event => {
        let fromTop = window.scrollY;

        mainNavLinks.forEach((link, index) => {
          let section = document.getElementById(decodeURI(link.hash).substring(1));
          let nextSection = null
          if (mainNavLinks[index + 1]) {
            nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
          }
          if (section.offsetTop <= fromTop) {
            if (nextSection) {
              if (nextSection.offsetTop > fromTop) {
                link.classList.add("current");
              } else {
                link.classList.remove("current");    
              }
            } else {
              link.classList.add("current");
            }
          } else {
            link.classList.remove("current");
          }
        });
      });

    </script>
  </body>
</html>
